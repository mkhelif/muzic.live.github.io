{{ $id := delimit (shuffle (seq 1 9)) "" }}
{{ $directory := path.Join .Page.Path .Params.pictures }}
{{ $contentDirectory := path.Join (cond hugo.IsDevelopment "content" "") $directory }}

{{ if fileExists $contentDirectory }}
    {{ $pictures := readDir $contentDirectory }}
    <div id="carousel-{{ $id }}" class="glide mt-4">
        <div class="glide__track" data-glide-el="track">
            <ul class="glide__slides">
                {{ range sort $pictures ".Name" "asc" }}
                {{ .Name }}
                    <li class="glide__slide text-center">
                        <img src="{{ path.Join $directory .Name }}" alt="{{ $.Params.alt }}" height="512px">
                    </li>
                {{ end }}
            </ul>
        </div>

        <div class="glide__arrows" data-glide-el="controls">
            <button class="glide__arrow glide__arrow--left" data-glide-dir="<">
                <i class="fa fa-caret-left"></i>
            </button>
            <button class="glide__arrow glide__arrow--right" data-glide-dir=">">
                <i class="fa fa-caret-right"></i>
            </button>
        </div>

        <div class="glide__bullets" data-glide-el="controls[nav]">
            {{ range seq (len $pictures) }}
                <button class="glide__bullet" data-glide-dir="={{ . }}"></button>
            {{ end }}
        </div>
    </div>
    {{ partial "copyright.html" .Params.author }}

    <script type="text/javascript">
        new Glide('#carousel-{{ $id }}', {
            type: 'carousel',
            focusAt: 'center',
            perView: 1,
        }).mount();
    </script>
{{ end }}
